<!DOCTYPE HTML>
<html lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:35 GMT -->
<head>
    <meta charset="utf-8">
    <title>Evara Dashboard</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/admin-assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="/admin-assets/css/main.css" rel="stylesheet" type="text/css" />
</head>
<style>

.dark-label {
    font-weight: bold;
    color: #333; /* Darker color */
}



.chart-container {
    position: relative;
    width: 100%;
    height: 400px; 
}

.chart-canvas {
    width: 100% !important;
    height: 100% !important;
}


.container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}


.dark-label {
    font-weight: bold;
    color: #333;
}
    
</style>
<body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="index.html" class="brand-wrap">
                <img src="/assets/imgs/theme/logo.jpg" class="logo" alt="Evara Dashboard">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item active">
                    <a class="menu-link" href="/admin/home"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item ">
                    <a class="menu-link" href="/admin/products"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products</span>
                    </a>
                    <div class="submenu">
                        <a href="page-products-list.html">Product List</a>
                      
                    </div>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="/admin/orderlist"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders</span>
                    </a>
                    <div class="submenu">
                        <a href="page-orders-1.html">Order list 1</a>
                        <a href="page-orders-2.html">Order list 2</a>
                        <a href="page-orders-detail.html">Order detail</a>
                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/userList"> <i class="icon material-icons md-store"></i>
                        <span class="text">Users</span>
                    </a>
                    
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="/admin/addProducts"> <i class="icon material-icons md-add_box"></i>
                        <span class="text">Add product</span>
                    </a>
                   
                </li>

                <li class="menu-item has-submenu">
                    <a class="menu-link" href="/admin/category"> <i class="icon material-icons md-monetization_on"></i>
                        <span class="text">Category</span>
                    </a>

                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="/admin/addCoupon"> <i class="icon material-icons md-add_box"></i>
                            <span class="text">Add Coupon</span>
                        </a>
                       
                    </li>

                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="/admin/couponList"> <i class="icon material-icons md-class"></i>
                            <span class="text"> Coupon</span>
                        </a>
                       
                    </li>
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="/admin/offerlist"> <i class="icon material-icons md-monetization_on"></i>
                            <span class="text"> OfferList</span>
                        </a>
                       
                    </li>

                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="/admin/addOffer"> <i class="icon material-icons md-monetization_on"></i>
                            <span class="text">Add Offer</span>
                        </a>
                       
                    </li>


                    <li class="menu-item">
                        <a class="menu-link" href="/admin/getsalesReport"> <i class="icon material-icons md-description"></i>
                            <span class="text">Sales Report</span> </a>
                    </li>


    </aside>
    <main class="main-wrap">
        <header class="main-header navbar d-flex justify-content-end"> 
            <div>
                <a class="dropdown-item text-danger" href="/admin/logout"><i class="material-icons md-exit_to_app"></i>Logout</a>
            </div>          
        </header>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Dashboard </h2>
                    <p>Whole data about your business here</p>
                </div>
                <div>
                    <!-- <a href="#" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Create report</a> -->
                </div>
            </div>
            <div class="row">
                  <% let totalAmount = 0; %>
                  <% for (let i = 0; i < orders.length; i++) { %>
                      <% totalAmount += parseFloat(orders[i].totalPrice); %>
                  <% } %>
                  <div class="col-lg-3">
                      <div class="card card-body mb-4">
                          <article class="icontext">
                              <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                              <div class="text">
                                  <h6 class="mb-1 card-title">Revenue</h6>
                                  <span>â‚¹<%= totalAmount.toFixed(2) %></span>
                              </div>
                          </article>
                      </div>
                  </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-local_shipping"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Orders</h6> <span><%=orders.length%></span>
                                <span class="text-sm">
                                    Excluding orders in transit
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-qr_code"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Products</h6> <span><%=products.length%></span>
                                <span class="text-sm">
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Categories</h6> <span><%=category.length%></span>
                                <span class="text-sm">
                                  
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
            </div>


            <div class="container">
                <div class="container">
                    <div class="filter-container">
                        <label for="timeFilter" class="dark-label">Time Filter:</label>
                        <select id="timeFilter" onchange="updateChart()">
                            <option value="monthly" selected>Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="myChart" class="chart-canvas"></canvas>
                    </div>
                </div>
            
            <div class="row">
                <div class="col-xl-8 col-lg-12">
                    <!-- <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Sale statistics</h5>
                            <canvas id="myChart" height="120px"></canvas>
                        </article>


                    </div> -->
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="card mb-4">
                               
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="card mb-4">
                              
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-xl-4 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">
                           
                            
                            <canvas id="myChart2" height="217"></canvas>
                        </article>
                    </div>
                    <div class="card mb-4">
                        
                    </div>
                </div> -->
            </div>
            
                    </div> <!-- table-responsive end// -->
                </div>
            </div>


            <div class="col-lg-9">
                <div class="card mb-4">
                    <article class="card-body">
                        <h5 class="card-title">Best Selling Products</h5>
                        <table id="bestSellingProductsTable" class="table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Total Sales</th>
                                </tr>
                            </thead>
                            <tbody>
                                  <%bestSellingProducts.forEach(product=>{%>
                                    
                                
                                    <tr>
                                        <td><%=product.productName%></td>
                                        <td><%=product.totalSales%></td>
                                    </tr>
                               <% });%>
                            </tbody>
                        </table>
                    </article>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="card mb-4">
                    <article class="card-body">
                        <h5 class="card-title">Best Selling Categories</h5>
                        <table id="bestSellingProductsTable" class="table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Total Sales</th>
                                </tr>
                            </thead>
                            <tbody>
                                 
                                    
                                <%bestSellingCategories.forEach(category=>{%>
                                    
                                
                                    <tr>
                                        <td><%=category.categoryName%></td>
                                        <td><%=category.totalSales%></td>
                                    </tr>
                               <% });%>
                            </tbody>
                        </table>
                    </article>
                </div>
            </div>
            <!-- End Best Selling Products section -->
        </div>
    </section>
            <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <!-- <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a></li>
                    </ul> -->
                </nav>
            </div>
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    
                </div>
            </div>
        </footer>
    </main>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>
    <script src="/admin-assets/js/vendors/chart.js"></script>
    <script src="/admin-assets/js/vendors/custom-chart.js" type="text/javascript"></script>
  
    
    <script>
        // Data from the backend
        const orderCountsByMonth = <%= JSON.stringify(orderCountsByMonth) %>;
        const productCountsByMonth = <%= JSON.stringify(productCountsByMonth) %>;
        const orderCountsByYear = <%= JSON.stringify(orderCountsByYear) %>;
        const productCountsByYear = <%= JSON.stringify(productCountsByYear) %>;
    
        // Initialize Chart
        const ctx = document.getElementById('myChart').getContext('2d');
        let salesChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    {
                        label: 'Order Counts',
                        data: orderCountsByMonth,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Product Counts',
                        data: productCountsByMonth,
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 10,
                        },
                    },
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Sales Statistics',
                        font: {
                            size: 18,
                            weight: 'bold',
                        },
                    },
                },
            },
        });
    
        function updateChart() {
            const timeFilter = document.getElementById("timeFilter").value;
            let newData;
    
            if (timeFilter === "monthly") {
                newData = {
                    orderCounts: orderCountsByMonth,
                    productCounts: productCountsByMonth,
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                };
            } else if (timeFilter === "yearly") {
                newData = {
                    orderCounts: orderCountsByYear,
                    productCounts: productCountsByYear,
                    labels: computeYearlyLabels()
                };
            }
    
            salesChart.data.datasets[0].data = newData.orderCounts;
            salesChart.data.datasets[1].data = newData.productCounts;
            salesChart.data.labels = newData.labels;
    
            salesChart.update();
        }
    
        function computeYearlyLabels() {
            let currentYear = new Date().getFullYear();
            let labels = [];
    
            for (let i = currentYear - 5; i <= currentYear + 5; i++) {
                labels.push(i.toString());
            }
    
            return labels;
        }
    </script>
















</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:57 GMT -->
</html>